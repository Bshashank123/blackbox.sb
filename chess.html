<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chess</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    :root{
      --panel:#171923; --muted:#a7adbb;
      --sq-light:#769656; /* lighter green */
      --sq-dark:#4a7039;  /* deeper green  */
      --board-max:560px;  /* hard cap for desktop */
    }

    *{box-sizing:border-box}

    body{
      margin:0; background:#0f1115; color:#fff;
      font-family:system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow-x:hidden;
    }

    /* ---------------- Header ---------------- */
    .header{position:relative;text-align:center;padding:12px;border-bottom:1px solid #222}
    .back-btn{
      position:absolute;left:15px;top:15px;background:#222637;color:#fff;
      border:0;border-radius:8px;padding:6px 10px;cursor:pointer
    }
    .back-btn:hover{filter:brightness(1.1)}

    /* ---------------- Toolbar (centered) ---------------- */
    .toolbar{
      display:grid;
      grid-template-columns: 1fr auto 1fr;  /* left | center | right */
      align-items:center;
      gap:14px;
      padding:14px 20px;
      background:#14161f;border-bottom:1px solid #222;
    }
    .toolbar-group{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;align-items:center}
    .toolbar-group.left{justify-self:end}
    .toolbar-group.right{justify-self:start}
    .toolbar button{
      background:linear-gradient(145deg,#222637,#181b28);
      color:#fff;border:1px solid #2a3046;border-radius:12px;
      padding:12px 22px;font-size:1rem;font-weight:600;min-width:110px;
      cursor:pointer;transition:.2s;
    }
    .toolbar button:hover{filter:brightness(1.15);transform:translateY(-2px)}
    .toolbar button:disabled{opacity:.5;cursor:not-allowed}
    .turn-indicator{
      background:#222637;padding:10px 26px;border-radius:30px;
      font-weight:700;box-shadow:0 0 12px rgba(255,255,255,.15)
    }
    .turn-white{box-shadow:0 0 12px rgba(255,255,255,.55)}
    .turn-black{background:#111318;box-shadow:0 0 12px rgba(0,0,0,.85)}

    /* ---------------- Main layout: captures | board | moves ---------------- */
    .game-layout{
      display:grid;
      grid-template-columns: 220px auto 220px;  /* left sidebar | center | right sidebar */
      justify-content:center;
      align-items:start;
      gap:24px;
      padding:22px;
    }
    .sidebar{display:flex;flex-direction:column;gap:14px;min-width:200px}
    .panel{background:var(--panel);border:1px solid #2a3046;border-radius:12px;padding:10px}
    .panel h3{margin:0 0 6px;text-align:center;color:var(--muted);font-size:14px;letter-spacing:.4px;text-transform:uppercase}
    #lostBlack,#lostWhite{min-height:30px;font-size:22px;text-align:center}
    #moveList{margin:0;padding-left:20px;max-height:420px;overflow:auto;font-size:15px}

    /* ---------------- Board ---------------- */
    .board-box{
      /* single source of truth for board size */
      --board: min(92vw, 75vh, var(--board-max));
      width:var(--board); height:var(--board);
      display:block;
    }
    .chess-board{
      width:100%; height:100%;
      display:grid; grid-template-columns:repeat(8,1fr); grid-template-rows:repeat(8,1fr);
      border:4px solid #2a3046;border-radius:12px;box-shadow:0 0 15px rgba(0,0,0,.7);
      user-select:none;
    }
    .square{
      display:flex;justify-content:center;align-items:center;
      color:#fff; transition:.08s; line-height:1;
      font-size: calc(var(--board)/8 * .78); /* scale glyphs to cells */
    }
    .square.light{background:var(--sq-light)}
    .square.dark{background:var(--sq-dark)}
    .square:hover{filter:brightness(1.06)}
    .square.highlight{box-shadow:inset 0 0 0 3px rgba(0,255,100,.6)}
    .square.capture-highlight{box-shadow:inset 0 0 0 3px rgba(255,80,80,.85)}
    .square.selected{box-shadow:0 0 14px rgba(80,255,120,.8)}

    /* Piece contrast */
    .square[title^="b"]{color:#0b0b0b;text-shadow:0 0 3px #fff8,0 0 6px #fff3}
    .square[title^="w"]{color:#f6f7f8;text-shadow:0 0 2px #0007,0 0 5px #0005}

    /* ---------------- Mobile ---------------- */
    @media (max-width: 980px){
      .game-layout{
        grid-template-columns: 1fr;           /* stack */
        grid-template-rows: auto auto auto;   /* captures, board, moves */
        justify-items:center;
      }
      .sidebar{width:100%;max-width:720px;flex-direction:row}
      .panel{flex:1}
      .board-box{--board: min(95vw, 70vh, var(--board-max));}
      .toolbar{grid-template-columns:1fr;justify-items:center}
      .toolbar-group.left,.toolbar-group.right{justify-self:center}
    }

    footer{text-align:center;padding:10px;color:#888;border-top:1px solid #222;font-size:14px}
  </style>
</head>
<body>
  <header class="header">
    <button class="back-btn" onclick="location.href='index.html'">‚Üê Back</button>
    <h1>Chess</h1>
  </header>

  <!-- Centered toolbar: left buttons ‚Ä¢ turn badge ‚Ä¢ right buttons -->
  <section class="toolbar">
    <div class="toolbar-group left">
      <button id="undoBtn">‚è™ Undo</button>
      <button id="redoBtn">‚è© Redo</button>
    </div>
    <span id="turnBadge" class="turn-indicator turn-white">White to move</span>
    <div class="toolbar-group right">
      <button id="flipBtn">üîÑ Flip Board</button>
      <button id="newBtn">‚ôªÔ∏è New Game</button>
    </div>
  </section>

  <!-- Captures (LEFT) | Board (CENTER) | Moves (RIGHT) -->
  <main class="game-layout">
    <aside class="sidebar">
      <div class="panel"><h3>Black Captures</h3><div id="lostBlack"></div></div>
      <div class="panel"><h3>White Captures</h3><div id="lostWhite"></div></div>
    </aside>

    <div class="board-box">
      <div id="board" class="chess-board"></div>
    </div>

    <aside class="sidebar">
      <div class="panel">
        <h3>Move List</h3>
        <ol id="moveList"></ol>
      </div>
    </aside>
  </main>

  <footer>‚ôü Chess ‚Ä¢ Captures Left ‚Ä¢ Moves Right ‚Ä¢ Centered Toolbar ‚Ä¢ No Cropping</footer>

  <script src="chess.js"></script>
</body>
</html>
